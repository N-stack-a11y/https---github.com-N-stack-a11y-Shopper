{"ast":null,"code":"import React,{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<300+1;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_Product]=useState([]);const[CartItems,setCartItems]=useState(getDefaultCart());useEffect(()=>{fetch('http://localhost:3000/allproducts').then(response=>response.json()).then(data=>setAll_Product(data));if(localStorage.getItem('auth-token')){fetch('http://localhost:3000/getcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':`${localStorage.getItem('auth-token')}`,'Content-Type':'application/json'},body:\"\"}).then(response=>response.json()).then(data=>setCartItems(data));}},[]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));if(localStorage.getItem('auth-token')){fetch('http://localhost:3000/addtocart',{method:'POST',headers:{Accept:'application/form-data','auth-token':`${localStorage.getItem('auth-token')}`,'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));if(localStorage.getItem('auth-token')){if(localStorage.getItem('auth-token')){fetch('http://localhost:3000/removefromcart',{method:'POST',headers:{Accept:'application/form-data','auth-token':`${localStorage.getItem('auth-token')}`,'Content-Type':'application/json'},body:JSON.stringify({\"itemId\":itemId})}).then(response=>response.json()).then(data=>console.log(data));}}};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in CartItems){if(CartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));if(itemInfo){totalAmount+=itemInfo.new_price*CartItems[item];}}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in CartItems){if(CartItems[item]>0){totalItem+=CartItems[item];}}return totalItem;};useEffect(()=>{console.log(\"CartItems updated:\",CartItems);},[CartItems]);const contextValue={getTotalCartItems,getTotalCartAmount,all_product:all_product||[],CartItems:CartItems||{},addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;/** import React, { createContext, useState } from \"react\";\r\nimport all_product from \"../Components/Assets/all_product\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst getDefaultCart = ()=>{\r\n    let cart ={};\r\n    for (let index = 0; index < all_product.length+1; index++) {\r\n        cart[index] = 0;\r\n    }\r\n    return cart;\r\n}\r\n\r\nconst ShopContextProvider = (props) => {\r\n    const [CartItems,setCartItems] = useState(getDefaultCart());\r\n        const addToCart = (itemId) =>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]+1})); \r\n        console.log(CartItems);\r\n    }\r\n\r\n    const removeFromCart = (itemId) =>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]-1}))\r\n    }\r\n\r\n      const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for(const item in CartItems)\r\n        {\r\n            if(CartItems[item]>0)\r\n            {\r\n                let itemInfo = all_product.find((product)=>product.id===Number(item));\r\n                totalAmount += itemInfo.new_price * CartItems[item];\r\n            }\r\n           return totalAmount;\r\n        }\r\n    }\r\n        const getTotalCartItems = () =>{\r\n            let totalItem = 0;\r\n            for(const item in CartItems)\r\n            {\r\n                if(CartItems[item]>0)\r\n                {\r\n                    totalItem+= CartItems[item];\r\n                }\r\n            }\r\n        return totalItem;\r\n    } \r\n    const contextValue = {getTotalCartItems,getTotalCartAmount,all_product,CartItems,addToCart,removeFromCart};\r\n    \r\n    return(\r\n    <ShopContext.Provider value={contextValue}>\r\n    {props.children}\r\n    </ShopContext.Provider>\r\n)\r\n}\r\n\r\nexport default ShopContextProvider;  */","map":{"version":3,"names":["React","createContext","useState","useEffect","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_Product","CartItems","setCartItems","fetch","then","response","json","data","localStorage","getItem","method","headers","Accept","body","addToCart","itemId","prev","JSON","stringify","console","log","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["C:/Users/Admin/Desktop/E-Commerce/Frontend/src/Context/ShopContext.jsx"],"sourcesContent":[" import React, { createContext, useState, useEffect } from \"react\";\r\n\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst getDefaultCart = () => {\r\n    let cart = {};\r\n    for (let index = 0; index < 300+1; index++) {\r\n        cart[index] = 0;\r\n    }\r\n    return cart;\r\n};\r\n\r\nconst ShopContextProvider = (props) => {\r\n\r\n    const [all_product,setAll_Product] = useState([]);\r\n    const [CartItems, setCartItems] = useState(getDefaultCart());\r\n\r\n    useEffect(()=>{\r\n        fetch('http://localhost:3000/allproducts')\r\n        .then((response)=>response.json())\r\n        .then((data)=>setAll_Product(data))\r\n\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:3000/getcart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json',\r\n                },\r\n                body:\"\",\r\n            }).then((response)=>response.json())\r\n            .then((data)=>setCartItems(data));\r\n        }\r\n    },[])\r\n    \r\n    const addToCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + 1 }));\r\n        if(localStorage.getItem('auth-token')){\r\n            fetch('http://localhost:3000/addtocart',{\r\n                method:'POST',\r\n                headers:{\r\n                    Accept:'application/form-data',\r\n                    'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                    'Content-Type':'application/json',\r\n                },\r\n                body:JSON.stringify({\"itemId\":itemId}),\r\n            })\r\n            .then((response)=>response.json())\r\n            .then((data)=>console.log(data));\r\n        }\r\n    }\r\n    const removeFromCart = (itemId) => {\r\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }));\r\n        if(localStorage.getItem('auth-token')){\r\n            if(localStorage.getItem('auth-token')){\r\n                fetch('http://localhost:3000/removefromcart',{\r\n                    method:'POST',\r\n                    headers:{\r\n                        Accept:'application/form-data',\r\n                        'auth-token':`${localStorage.getItem('auth-token')}`,\r\n                        'Content-Type':'application/json',\r\n                    },\r\n                    body:JSON.stringify({\"itemId\":itemId}),\r\n                })\r\n                .then((response)=>response.json())\r\n                .then((data)=>console.log(data));\r\n            }\r\n        }\r\n    };\r\n\r\n    const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for (const item in CartItems) {\r\n            if (CartItems[item] > 0) {\r\n                let itemInfo = all_product.find((product) => product.id === Number(item));\r\n                if (itemInfo) {\r\n                    totalAmount += itemInfo.new_price * CartItems[item];\r\n                }\r\n            }\r\n        }\r\n        return totalAmount;\r\n    };\r\n\r\n    const getTotalCartItems = () => {\r\n        let totalItem = 0;\r\n        for (const item in CartItems) {\r\n            if (CartItems[item] > 0) {\r\n                totalItem += CartItems[item];\r\n            }\r\n        }\r\n        return totalItem;\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(\"CartItems updated:\", CartItems);\r\n    }, [CartItems]);\r\n\r\n    const contextValue = {\r\n        getTotalCartItems,\r\n        getTotalCartAmount,\r\n        all_product: all_product || [],\r\n        CartItems: CartItems || {},\r\n        addToCart,\r\n        removeFromCart,\r\n    };\r\n\r\n    return (\r\n        <ShopContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </ShopContext.Provider>\r\n    );\r\n};\r\n\r\nexport default ShopContextProvider;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/** import React, { createContext, useState } from \"react\";\r\nimport all_product from \"../Components/Assets/all_product\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst getDefaultCart = ()=>{\r\n    let cart ={};\r\n    for (let index = 0; index < all_product.length+1; index++) {\r\n        cart[index] = 0;\r\n    }\r\n    return cart;\r\n}\r\n\r\nconst ShopContextProvider = (props) => {\r\n    const [CartItems,setCartItems] = useState(getDefaultCart());\r\n        const addToCart = (itemId) =>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]+1})); \r\n        console.log(CartItems);\r\n    }\r\n\r\n    const removeFromCart = (itemId) =>{\r\n        setCartItems((prev)=>({...prev,[itemId]:prev[itemId]-1}))\r\n    }\r\n\r\n      const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for(const item in CartItems)\r\n        {\r\n            if(CartItems[item]>0)\r\n            {\r\n                let itemInfo = all_product.find((product)=>product.id===Number(item));\r\n                totalAmount += itemInfo.new_price * CartItems[item];\r\n            }\r\n           return totalAmount;\r\n        }\r\n    }\r\n        const getTotalCartItems = () =>{\r\n            let totalItem = 0;\r\n            for(const item in CartItems)\r\n            {\r\n                if(CartItems[item]>0)\r\n                {\r\n                    totalItem+= CartItems[item];\r\n                }\r\n            }\r\n        return totalItem;\r\n    } \r\n    const contextValue = {getTotalCartItems,getTotalCartAmount,all_product,CartItems,addToCart,removeFromCart};\r\n    \r\n    return(\r\n    <ShopContext.Provider value={contextValue}>\r\n    {props.children}\r\n    </ShopContext.Provider>\r\n)\r\n}\r\n\r\nexport default ShopContextProvider;  */"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}